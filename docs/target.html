<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>target.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>target.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>
<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">Bool</span>
<span class="kn">from</span> <span class="nn">nav_msgs.msg</span> <span class="kn">import</span> <span class="n">Odometry</span>
<span class="kn">from</span> <span class="nn">sensor_msgs.msg</span> <span class="kn">import</span> <span class="n">LaserScan</span> <span class="c1"># laser</span>
<span class="kn">import</span> <span class="nn">tf</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>TARGET.PY
class for the target object, using code from PA2 Archita</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">Target</span><span class="p">:</span>

	<span class="n">FREQ</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># Hz</span>
	<span class="n">SLEEP</span> <span class="o">=</span> <span class="mi">2</span>
	<span class="n">PI</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
	<span class="n">LINVELOCITY</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># mode 1, 2 and 3</span>
	<span class="n">ANGVELOCITY</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># mode 1</span>
	<span class="n">DUR_MUL</span> <span class="o">=</span> <span class="mi">1</span>

	<span class="n">TANGVELOCITY</span> <span class="o">=</span> <span class="mf">0.4</span> <span class="c1"># mode 2, 3 ang velocity</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

		<span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">)</span> <span class="c1"># feel free to rename</span>
		<span class="n">mode</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a mode for the target movement by inputting an interger value, where 1 = hardcoded, 2 = sinusoidal, and 3 = randomized: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s2">&quot;robot_1/cmd_vel&quot;</span><span class="p">,</span> <span class="n">Twist</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">stat_sub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s2">&quot;visible_status&quot;</span><span class="p">,</span> <span class="n">Bool</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">visibility_callback</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># only care about most recent msg</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">sub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s2">&quot;robot_1/odom&quot;</span><span class="p">,</span> <span class="n">Odometry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">odom_callback</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">lasersub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s2">&quot;robot_1/base_scan&quot;</span><span class="p">,</span> <span class="n">LaserScan</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">laserscan_callback</span><span class="p">)</span>
		<span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">Target</span><span class="o">.</span><span class="n">SLEEP</span><span class="p">)</span>
	
		<span class="bp">self</span><span class="o">.</span><span class="n">posx</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># initalizing target x position at 0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">posy</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># initializing target y position at 0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">linxvel</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># initializing linear velocity at 0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># initializing angular velocity at 0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># current pose angle</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span> <span class="c1"># creating inital publish message, which is altered in the main</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>used for modes 2 and 3</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">distance_front</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># current distance in front of the target, based on the laser sensor readings  </span>
		<span class="bp">self</span><span class="o">.</span><span class="n">distance_frontangle</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># angle at which the minimum distance is</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">turn_direction</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># left if 0, right if 1</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># if the target is moving according to the model, 1 if the target has an obstacle nearby</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">is_lost</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#1 if the robot is lost from the target</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prev_state</span> <span class="o">=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>for mode 3</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">prev_accel</span> <span class="o">=</span> <span class="mi">0</span> 
		<span class="bp">self</span><span class="o">.</span><span class="n">prev_angvel</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">Target</span><span class="o">.</span><span class="n">SLEEP</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>from Archita pa1, modified slightly</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">odom_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">odom_message</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <pre><code>    Getting information on the pose of the target; Not explicitly used in the current version
    @params odom_msg: subscription
</code></pre>
<p>getting all of the odom information on the current pose of the robot</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">posx</span> <span class="o">=</span> <span class="n">odom_message</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">posy</span> <span class="o">=</span> <span class="n">odom_message</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>from https://answers.ros.org/question/11545/plotprint-rpy-from-quaternion/#17106</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="p">(</span><span class="n">roll</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="n">yaw</span><span class="p">)</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">euler_from_quaternion</span><span class="p">([</span><span class="n">odom_message</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">odom_message</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">odom_message</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">odom_message</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">w</span><span class="p">])</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="n">yaw</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <h6>############### USED FOR MODE 1</h6>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>changing the message to simply rotate the robot</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">curve_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sharp</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <pre><code>    Moving the target to the right;
    @params sharp: integer either 1 or something else to suggest if the turn is sharp (higher angular velocity) or not
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="n">Target</span><span class="o">.</span><span class="n">ANGVELOCITY</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">LINVELOCITY</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">linxvel</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">LINVELOCITY</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span> <span class="o">=</span> <span class="o">-</span><span class="n">Target</span><span class="o">.</span><span class="n">ANGVELOCITY</span>
		<span class="k">if</span> <span class="n">sharp</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="n">Target</span><span class="o">.</span><span class="n">ANGVELOCITY</span><span class="o">*</span><span class="mf">1.25</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span> <span class="o">=</span> <span class="o">-</span><span class="n">Target</span><span class="o">.</span><span class="n">ANGVELOCITY</span><span class="o">*</span><span class="mf">1.25</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <pre><code>    Moving the target to the left;
    @params sharp: integer either 1 or something else to suggest if the turn is sharp (higher angular velocity) or not
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">curve_left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sharp</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">ANGVELOCITY</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">LINVELOCITY</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">linxvel</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">LINVELOCITY</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">ANGVELOCITY</span>
		<span class="k">if</span> <span class="n">sharp</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">ANGVELOCITY</span><span class="o">*</span><span class="mf">1.25</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">ANGVELOCITY</span><span class="o">*</span><span class="mf">1.25</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <pre><code>    Moving the target to the right;
    @params: None
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">straight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">LINVELOCITY</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">linxvel</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">LINVELOCITY</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span> <span class="o">=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <h6>############### USED FOR MODES AND 3</h6>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <pre><code>    Getting information on if the target it lost; 
    @params msg: subscription
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">visibility_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>if lost,</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">data</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>setting the previous state to be whatever it was before</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="bp">self</span><span class="o">.</span><span class="n">prev_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_lost</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">is_lost</span><span class="o">=</span><span class="mi">1</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <p>if not lost,</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">prev_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_lost</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">is_lost</span><span class="o">=</span><span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <pre><code>    Getting minimum distance in front of target for it to avoid obstacles;
    @params laserscan_msg: subscription
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">laserscan_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">laserscan_msg</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      <p>getting the reading for the minimum value to the right of the robot</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">numincrements</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">laserscan_msg</span><span class="o">.</span><span class="n">angle_max</span><span class="o">/</span><span class="n">laserscan_msg</span><span class="o">.</span><span class="n">angle_increment</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>diving the laser range into 3rds, and using the middle 3rd (the 2rd 3rd) to find the minimum distance in front of the target</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">index</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">numincrements</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span>
		<span class="n">good_index</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">min_front</span> <span class="o">=</span> <span class="mi">2</span>
		<span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">numincrements</span><span class="o">/</span><span class="mi">5</span><span class="p">):</span>
	  		<span class="k">if</span> <span class="n">laserscan_msg</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min_front</span><span class="p">:</span>
				<span class="n">min_front</span> <span class="o">=</span> <span class="n">laserscan_msg</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
				<span class="n">good_index</span> <span class="o">=</span> <span class="n">index</span>
			<span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">distance_front</span> <span class="o">=</span> <span class="n">min_front</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      <p>the angle at which the minimum distance is in front</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">distance_frontangle</span> <span class="o">=</span> <span class="n">laserscan_msg</span><span class="o">.</span><span class="n">angle_min</span> <span class="o">+</span> <span class="n">good_index</span><span class="o">*</span><span class="n">laserscan_msg</span><span class="o">.</span><span class="n">angle_increment</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      <p>minumum distance is to the left, turn right</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance_frontangle</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">turn_direction</span><span class="o">=</span><span class="mi">1</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">turn_direction</span><span class="o">=</span><span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      <pre><code>    Enabling the FSM for both sinusoidal and random movement based on if the target is lost fron the robot or if there is an obstacle in front;
    @params: None
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">find_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>giving a state of 1 if the target is too close to an obstacle or if robot lost target</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance_front</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_lost</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">=</span><span class="mi">1</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">=</span><span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      <h6>############### MODE 2</h6>
<p>similar to obstacle movements</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">sin_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <pre><code>    Creating sinusoidal movement for target based on finite state machine; Called in main
    @params: None
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      <p>self.angzvel = Target.TANGVELOCITY<em>(-2</em>self.turn_direction + 1) # if left, positive, if right, negative velocity</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">TANGVELOCITY</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">linxvel</span> <span class="o">=</span> <span class="mi">0</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linxvel</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="n">time</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span>
			<span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">to_sec</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <p>https://docs.python.org/3/library/math.html
self.linxvel = math.sin(0.1<em>time.to_sec())</em>0.025 + 0.075 # 0.05 to 0.1 velocity</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="bp">self</span><span class="o">.</span><span class="n">linxvel</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">LINVELOCITY</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.25</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">to_sec</span><span class="p">())</span><span class="o">*</span><span class="mf">0.3</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linxvel</span> 
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angzvel</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      <h6>############### MODE 3</h6>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <pre><code>    Creating randomized movement for target based on finite state machine; Called in main
    @params: None
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">rand_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      <p>stop moving linearly, if once again the robot is lost or the target is close to an obstacle</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">TANGVELOCITY</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

		<span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      <p>randomizing the third degree</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="n">jerk</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
			<span class="n">acc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_accel</span> <span class="o">+</span> <span class="n">jerk</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      <p>if above 5, making it below 5</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="k">if</span> <span class="n">acc</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">or</span> <span class="n">acc</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">5</span><span class="p">:</span>
				<span class="n">acc</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">acc</span>
			<span class="n">vel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev_angvel</span> <span class="o">+</span> <span class="n">acc</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-38'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-38'>#</a>
      </div>
      <p>if above one, making it below 1</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="k">if</span> <span class="n">vel</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">vel</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
				<span class="n">vel</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">vel</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Target</span><span class="o">.</span><span class="n">LINVELOCITY</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">vel</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">prev_accel</span> <span class="o">=</span> <span class="n">acc</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">prev_angvel</span> <span class="o">=</span> <span class="n">vel</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-39'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-39'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-40'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-40'>#</a>
      </div>
      <p>setup code</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="n">Target</span><span class="o">.</span><span class="n">FREQ</span><span class="p">)</span>
		<span class="n">beginning_time</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span>

		<span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-41'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-41'>#</a>
      </div>
      <p>if in the hardcoded mode, moving based on durations and turns</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_left</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">7</span><span class="o">*</span><span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">16</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">straight</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">16</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">19.75</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_left</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">19.75</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">28.5</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_right</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">28.5</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">41</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">straight</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">41</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">49</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_right</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">49</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">61</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">straight</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">61</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">69</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_right</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">69</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">79</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">straight</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">79</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">89.5</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_left</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">89.5</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">99.5</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">straight</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">99.5</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">109.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_right</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">109.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">122.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">straight</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">122.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">131.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_right</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">131.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">140.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">straight</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">140.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">146.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_right</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">146.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">150.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_left</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">150.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">154.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">curve_right</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">154.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="ow">and</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_rostime</span><span class="p">()</span> <span class="o">-</span> <span class="n">beginning_time</span> <span class="o">&lt;</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">155.25</span> <span class="o">*</span> <span class="n">Target</span><span class="o">.</span><span class="n">DUR_MUL</span><span class="p">):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">straight</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel_msg</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-42'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-42'>#</a>
      </div>
      <p>mode two functions</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">find_state</span><span class="p">()</span>
				<span class="k">print</span> <span class="s2">&quot;Distance in Front of Target: &quot;</span>
				<span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance_front</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">sin_move</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-43'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-43'>#</a>
      </div>
      <p>mode two functions</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">find_state</span><span class="p">()</span>
				<span class="k">print</span> <span class="s2">&quot;Distance in Front of Target: &quot;</span>
				<span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">distance_front</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">rand_move</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-44'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-44'>#</a>
      </div>
      <p>class for the points on grid, copied from pa3 Archita</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">Node</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-45'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-45'>#</a>
      </div>
      <p>initializing basic values of the node</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">goalx</span><span class="p">,</span> <span class="n">goaly</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-46'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-46'>#</a>
      </div>
      <p>self.value = grid.get_cell(x, y)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>		<span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="bp">None</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-47'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-47'>#</a>
      </div>
      <p>setting the previous node</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>	<span class="k">def</span> <span class="nf">set_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_node</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="n">other_node</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
	<span class="n">t</span> <span class="o">=</span> <span class="n">Target</span><span class="p">()</span>
	<span class="n">t</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
